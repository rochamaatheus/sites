<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SimulaÃ§Ã£o IA WhatsApp - Fixed</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Fira+Code:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #000;
        overflow: hidden;
      }

      @keyframes spin-slow {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes spin-reverse-slower {
        from {
          transform: rotate(360deg);
        }
        to {
          transform: rotate(0deg);
        }
      }

      @keyframes bounce-dots {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-4px);
        }
      }

      .animate-spin-slow {
        animation: spin-slow 8s linear infinite;
      }
      .animate-spin-reverse {
        animation: spin-reverse-slower 12s linear infinite;
      }

      .animate-bounce-1 {
        animation: bounce-dots 0.6s infinite 0s;
      }
      .animate-bounce-2 {
        animation: bounce-dots 0.6s infinite 0.15s;
      }
      .animate-bounce-3 {
        animation: bounce-dots 0.6s infinite 0.3s;
      }

      .layer {
        transition: transform 1200ms cubic-bezier(0.25, 1, 0.5, 1),
          opacity 1200ms ease-in-out, filter 1200ms ease-in-out;
        will-change: transform, opacity, filter;
        transform-origin: center center;
      }

      .state-normal #chat-layer {
        transform: scale(1);
        opacity: 1;
        filter: blur(0);
        pointer-events: auto;
      }
      .state-normal #system-layer {
        transform: scale(0.8);
        opacity: 0;
        pointer-events: none;
      }

      .state-system #chat-layer {
        opacity: 0;
        filter: blur(12px) brightness(0.5);
        pointer-events: none;
      }
      .state-system #system-layer {
        transform: scale(1);
        opacity: 1;
      }

      .state-returning #chat-layer {
        transform: scale(1);
        opacity: 1;
        filter: blur(0);
      }

      ::-webkit-scrollbar {
        width: 4px;
      }
      ::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 4px;
      }

      .chat-bg {
        background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
        background-repeat: repeat;
        background-size: 400px;
      }
    </style>
  </head>
  <body
    id="app-container"
    class="state-normal w-full h-screen relative select-none"
  >
    <div
      id="system-layer"
      class="layer absolute inset-0 z-0 bg-gray-900 flex flex-col items-center justify-center"
    >
      <div
        class="absolute inset-0 opacity-20"
        style="
          background-image: linear-gradient(#333 1px, transparent 1px),
            linear-gradient(90deg, #333 1px, transparent 1px);
          background-size: 40px 40px;
        "
      ></div>

      <div
        class="relative mb-8 transform transition-transform duration-500 hover:scale-105"
      >
        <div
          class="absolute inset-0 bg-green-500 rounded-full opacity-20 animate-ping"
        ></div>
        <div
          class="w-40 h-40 border-4 border-green-500/50 rounded-full flex items-center justify-center relative bg-gray-900 z-10 shadow-[0_0_60px_rgba(34,197,94,0.3)]"
        >
          <i
            data-lucide="database"
            class="w-16 h-16 text-green-400 animate-pulse"
          ></i>
        </div>
        <div
          class="absolute inset-[-20px] border border-dashed border-green-500/30 rounded-full animate-spin-slow"
        ></div>
        <div
          class="absolute inset-[-40px] border border-green-500/10 rounded-full animate-spin-reverse"
        ></div>
      </div>

      <div class="w-full max-w-2xl px-8 font-mono text-left">
        <div
          class="flex justify-between text-green-500 text-xs mb-2 border-b border-green-500/30 pb-1 uppercase tracking-widest"
        >
          <span>Acesso_Sistema_Central</span>
          <span>Canal_Criptografado</span>
        </div>
        <div
          id="terminal-logs"
          class="space-y-1.5 h-48 overflow-hidden relative flex flex-col justify-end"
        ></div>
        <div
          id="processing-indicator"
          class="flex items-center gap-2 mt-2 opacity-0 transition-opacity duration-300"
        >
          <div class="w-2 h-4 bg-green-500 animate-pulse"></div>
          <span class="text-green-500/50 text-sm">Processando consulta...</span>
        </div>
      </div>
    </div>

    <div
      id="chat-layer"
      class="layer chat-bg absolute inset-0 z-10 flex flex-col bg-[#E5DDD5] origin-center"
    >
      <div
        class="bg-[#008069] h-16 flex items-center px-4 shadow-md shrink-0 text-white z-20"
      >
        <div class="flex items-center gap-3 w-full">
          <i data-lucide="arrow-left" class="w-6 h-6 cursor-pointer"></i>
          <div
            class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center overflow-hidden border border-white/20"
          >
            <div
              class="bg-gradient-to-br from-emerald-500 to-teal-800 w-full h-full flex items-center justify-center"
            >
              <i data-lucide="database" class="w-5 h-5 text-white"></i>
            </div>
          </div>
          <div class="flex-1 flex flex-col">
            <span class="font-semibold text-base leading-tight"
              >InteligÃªncia de Dados IA</span
            >
            <span
              id="status-text"
              class="text-xs text-green-100 opacity-90 transition-opacity duration-300"
              >online</span
            >
          </div>
          <div class="flex items-center gap-5">
            <i data-lucide="video" class="w-5 h-5"></i>
            <i data-lucide="phone" class="w-5 h-5"></i>
            <i data-lucide="more-vertical" class="w-5 h-5"></i>
          </div>
        </div>
      </div>

      <div
        id="messages-container"
        class="flex-1 overflow-y-auto p-4 md:px-20 lg:px-60 overflow-x-hidden relative flex flex-col"
      >
        <div class="flex justify-center my-6">
          <div
            class="bg-[#FFEECD] text-[11px] text-[#54656f] px-3 py-1.5 rounded-lg shadow-sm flex items-center gap-1.5 max-w-[90%] text-center"
          >
            <i data-lucide="lock" class="w-3 h-3 stroke-[3px]"></i>
            <span>Criptografia de ponta-a-ponta ativada.</span>
          </div>
        </div>

        <div
          id="typing-indicator"
          class="hidden transition-all duration-300 transform origin-left mb-3"
        >
          <div class="flex justify-start">
            <div
              class="bg-white p-3 rounded-lg rounded-tl-none shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] flex items-center gap-1.5 w-16 h-10"
            >
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce-1"
              ></div>
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce-2"
              ></div>
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce-3"
              ></div>
            </div>
          </div>
        </div>

        <div id="scroll-anchor"></div>
      </div>

      <div class="bg-[#F0F2F5] px-4 py-3 flex items-end gap-3 shrink-0 z-20">
        <i
          data-lucide="smile"
          class="w-6 h-6 text-[#54656f] mb-2 cursor-pointer hover:text-gray-600"
        ></i>
        <i
          data-lucide="paperclip"
          class="w-6 h-6 text-[#54656f] mb-2 cursor-pointer hover:text-gray-600"
        ></i>

        <div
          class="flex-1 bg-white rounded-lg px-4 py-3 shadow-sm text-[#111b21] text-[15px] flex items-center min-h-[45px] text-gray-400"
        >
          <span id="input-placeholder">Mensagem</span>
        </div>

        <div
          id="mic-btn"
          class="bg-[#008069] text-white p-3 rounded-full shadow-sm cursor-pointer mb-1 transition-transform transform active:scale-90 flex items-center justify-center"
        >
          <i data-lucide="mic" class="w-5 h-5"></i>
        </div>
      </div>
    </div>

    <script>
      lucide.createIcons();

      const appContainer = document.getElementById('app-container');
      const messagesContainer = document.getElementById('messages-container');
      const scrollAnchor = document.getElementById('scroll-anchor');
      const typingIndicator = document.getElementById('typing-indicator');
      const statusText = document.getElementById('status-text');
      const terminalLogs = document.getElementById('terminal-logs');
      const processingIndicator = document.getElementById(
        'processing-indicator',
      );
      const inputPlaceholder = document.getElementById('input-placeholder');
      const micBtn = document.getElementById('mic-btn');

      const getCurrentTime = () => {
        return new Date().toLocaleTimeString([], {
          hour: '2-digit',
          minute: '2-digit',
        });
      };

      const scrollToBottom = () => {
        scrollAnchor.scrollIntoView({ behavior: 'smooth' });
      };

      const addMessage = (text, sender) => {
        const div = document.createElement('div');

        div.className = `flex mb-3 ${
          sender === 'user' ? 'justify-end' : 'justify-start'
        }`;

        const isUser = sender === 'user';
        const bgClass = isUser
          ? 'bg-[#E7FFDB] rounded-tr-none'
          : 'bg-white rounded-tl-none';

        const checkIcon = isUser
          ? `<i data-lucide="check" class="w-4 h-4 text-[#667781] ml-0.5 check-icon"></i>`
          : '';

        div.innerHTML = `
                <div class="relative px-3 py-2 rounded-lg shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] max-w-[85%] md:max-w-[65%] text-[15px] leading-relaxed ${bgClass}">
                    <div class="whitespace-pre-line text-[#111b21] pb-4">${text}</div>
                    <div class="absolute right-2 bottom-1 flex items-center gap-1 select-none">
                        <span class="text-[11px] text-[#667781] mt-0.5">${getCurrentTime()}</span>
                        ${checkIcon}
                    </div>
                </div>
            `;

        messagesContainer.insertBefore(div, typingIndicator);
        lucide.createIcons();
        scrollToBottom();

        return div;
      };

      const addSystemLog = text => {
        const div = document.createElement('div');

        div.className =
          'text-green-400 text-sm md:text-lg font-bold flex items-center gap-2';
        div.innerHTML = `
                <span class="text-green-600 text-xs font-normal">[${
                  new Date().toLocaleTimeString().split(' ')[0]
                }]</span>
                ${text}
            `;
        terminalLogs.appendChild(div);

        terminalLogs.scrollTop = terminalLogs.scrollHeight;
      };

      const setPhase = phase => {
        appContainer.classList.remove(
          'state-normal',
          'state-system',
          'state-returning',
        );

        if (phase === 'result') {
          appContainer.classList.add('state-normal');
        } else if (phase === 'transition_in') {
          appContainer.classList.add('state-system');
        } else if (phase === 'transition_out') {
          appContainer.classList.add('state-returning');
        }
      };

      const updateStatus = text => {
        statusText.style.opacity = '0';
        setTimeout(() => {
          statusText.innerText = text;
          statusText.style.opacity = '1';
        }, 300);
      };

      const runSimulation = () => {
        setTimeout(() => {
          addMessage('Como estÃ£o os nÃºmeros do sistema hoje?', 'user');
          inputPlaceholder.innerText = '';

          micBtn.innerHTML = `<i data-lucide="send" class="w-5 h-5 ml-0.5"></i>`;
          lucide.createIcons();

          setTimeout(() => {
            updateStatus('digitando...');
            typingIndicator.classList.remove('hidden');
            scrollToBottom();
          }, 1000);

          setTimeout(() => {
            setPhase('transition_in');
            typingIndicator.classList.add('hidden');
            updateStatus('conectado ao sistema...');
            processingIndicator.classList.remove('opacity-0');

            runSystemSequence();
          }, 2500);
        }, 1000);
      };

      const runSystemSequence = () => {
        const logs = [
          { msg: '> Handshake iniciado...', delay: 500 },
          { msg: '> Autenticando token seguro...', delay: 1200 },
          { msg: '> Acessando Data Warehouse (Cluster-01)...', delay: 2000 },
          { msg: '> Executando query de agregaÃ§Ã£o...', delay: 2800 },
          { msg: '> Buscando mÃ©tricas em tempo real...', delay: 3500 },
          { msg: '> Dados recuperados. LatÃªncia 45ms.', delay: 4000 },
        ];

        logs.forEach(log => {
          setTimeout(() => addSystemLog(log.msg), log.delay);
        });

        setTimeout(() => {
          setPhase('transition_out');
          processingIndicator.classList.add('opacity-0');
        }, 5000);

        setTimeout(() => {
          setPhase('result');
          updateStatus('online');

          const checks = document.querySelectorAll('.check-icon');
          checks.forEach(icon => {
            icon.outerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#53bdeb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-check ml-0.5"><path d="M18 6 7 17l-5-5"/><path d="m22 10-7.5 7.5L13 16"/></svg>`;
          });

          addMessage(
            `ðŸ“Š <b>RelatÃ³rio DiÃ¡rio - 15/12</b>\n\nAnalisei os dados em tempo real. Aqui estÃ¡ o resumo:\n\nðŸ’° <b>Faturamento:</b> R$ 142.300,00\nðŸ“ˆ <b>Crescimento:</b> +15% vs ontem\nðŸ‘¥ <b>UsuÃ¡rios Ativos:</b> 1.240\n\nTodos os sistemas operando normalmente.`,
            'ai',
          );
        }, 6400);
      };

      window.onload = runSimulation;
    </script>
  </body>
</html>
